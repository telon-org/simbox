#!/usr/bin/perl -l –
# ussd.pl — USSD messaging via GSM modem
# Created: 03 Jul 2010
# ver 0.2

use warnings;
use strict;


#print decode_text7( 'FFD6F01C0D1287D961F71C347FCFE9613B3B1F2ED341B3582E0792D7C5ECB2DA05' );
print decode_text7( 'FFD6F01C0D1287D961F71C347FCFE9613B3B1F2ED341321B2D5603C9EB627659ED02' );

#print decode_text7( 'FF04110430043B0430043D04410020003100310037002E003000300020044004430431002E' );
#print decode_text7( 'FFDA703A6C5F8741EE30089E26AFD9E9FA185D76BBD36110FC3D67D7CF79908858769F4073789ABDAEDBC36E773A2C02C1E579B53B1DA6875D206A59DE4EBB41F6FCFAED0EBBDDE930A805A281CE6F72DE9D07' );
#DA703A6C5F8741EE30089E26AFD9E9FA185D76BBD36110FC3D67D7CF79908858769F4073789ABDAEDBC36E773A2C02C1E579B53B1DA6875D206A59DE4EBB41F6FCFAED0EBBDDE930A805A281CE6F72DE9D07
#04110430043B0430043D04410020003100310037002E003000300020044004430431002E

#print decode_text7( 'FFD6F01C0D1287D961F71C347FCFE9613B3B1F2ED341321B2D5603C9EB627659ED02' )
sub decode_text7 {
pack '(b*)*',
unpack 'C/(a7)',
pack 'C a*',
unpack 'C b*',
pack 'H*', $_[0]
}

sub encode_text7 {
uc
unpack 'H*',
pack 'C b*',
length $_[0],
join '',
unpack '(b7)*', $_[0];
}